\ProvidesPackage{beamerthemeNUS}
\RequirePackage{tikz}

\useoutertheme{default}
\useinnertheme{default}
\usecolortheme{default}
\usefonttheme{default}

\definecolor{NUSBlue}{RGB}{24, 61, 120} % NUS Blue
\definecolor{NUSLightBlue}{RGB}{208, 229, 238} % NUS Light Blue
\definecolor{NUSOrange}{RGB}{213, 115, 46} % NUS Orange
\definecolor{NUSLightOrange}{RGB}{255, 235, 220}
\definecolor{TextGray}{RGB}{64, 64, 64} % Text color
\definecolor{TextLightGray}{RGB}{127, 127, 127} % Light text color

% General colors
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{normal text}{fg=TextGray, bg=white}
\setbeamercolor{structure}{fg=NUSBlue}
\setbeamercolor{frametitle}{bg=NUSBlue, fg=TextGray}
\setbeamercolor{title}{fg=TextGray}
\setbeamercolor{date}{fg=TextGray}
\setbeamercolor{author}{fg=TextGray}
\setbeamercolor{structure}{fg=NUSBlue}

\setbeamertemplate{blocks}[shadow=false]
\setbeamercolor{block title}{fg=white,bg=NUSBlue}
\setbeamercolor{block body}{fg=TextGray,bg=NUSLightBlue}
\setbeamercolor{block title example}{fg=white,bg=NUSOrange}
\setbeamercolor{block body example}{fg=TextGray,bg=NUSLightOrange}


\makeatletter

\setbeamertemplate{frametitle}{
  \begin{minipage}[t]{0.74\textwidth}
    % {\usebeamerfont{frametitle}\color{TextGray}\LARGE\strut\insertframetitle\par}
    \ifx\insertframesubtitle\@empty
      {\usebeamerfont{frametitle}\color{TextGray}\LARGE\strut\insertframetitle\par}
    \else
      \vspace{-0.7em}
      {\usebeamerfont{frametitle}\color{TextGray}\LARGE\strut\insertframetitle\par}
      \vspace*{-0.1em}
      {\usebeamerfont{framesubtitle}\color{TextLightGray}\large\strut\insertframesubtitle\par}
      % \vspace{0.3em} % tighter vertical spacing below subtitle
    \fi
  \end{minipage}%
  \hfill
  \begin{minipage}[t]{0.20\textwidth}
    \vspace{-0.2em} % aligns with top of text block
    \raggedleft
    \includegraphics[height=0.7cm]{assets/nus-logo-blue-horizontal.jpg}
  \end{minipage}

  % \vspace{0.5em}
  \color{TextGray}\rule{\textwidth}{0.5pt}
  % \vspace{1.0em} % space between title block and slide content
}

\makeatother

\setbeamertemplate{footline}[frame number]

\setbeamertemplate{title page}{%
    \begin{flushleft}
        % \vspace*{1cm}
        \includegraphics[height=.8cm]{assets/nus-logo-blue-horizontal.jpg}

        % Title
        {\usebeamerfont{title}\usebeamercolor[fg]{title}\huge\inserttitle\par}
        \vspace{1em}
        \color{NUSBlue}\hrule height 2pt width 0.25\textwidth
        \vspace{2em}

        % Subtitle
        {\color{NUSOrange}\large\insertsubtitle\par}
        \vspace{1.5em}

        % Author
        {\color{TextGray}\insertauthor\par}
        \vspace{0.5em}

        % Date
        {\color{TextGray}\insertdate\par}
    \end{flushleft}
}

% Remove navigation symbols
\setbeamertemplate{navigation symbols}{}